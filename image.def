Bootstrap: docker
From: r-base:4.3.0

%post

  # apt
  apt-get update
  apt-get install -y libssl-dev libxml2-dev libcurl4-openssl-dev
  apt-get install -y python3 python3-pip python3-dev

  R --slave -e 'install.packages("data.table")'
  R --slave -e 'install.packages("bit64")'
  R --slave -e 'install.packages("remotes")'
  R --slave -e 'remotes::install_github("MislavSag/finfeatures")'
  R --slave -e 'install.packages("reticulate")'
  # packages
  R --slave -e 'install.packages("exuber")'
  R --slave -e 'remotes::install_github("ottosven/backCUSUM")'
  R --slave -e 'remotes::install_github("MislavSag/theftms")'
  R --slave -e 'install.packages("forecast")'
  # R --slave -e 'install.packages("forecast")'

  # Install Python packages
  pip3 install tsfel  

%runscript
  Rscript $@

%environment
  # Set environment variables if needed
  export RETICULATE_PYTHON=/usr/bin/python3